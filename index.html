<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Old Fashion</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @font-face {
            font-family: 'Gameplay';
            src: url('fonts/Gameplay.ttf') format('truetype');
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: #1a1a1a;
            color: white;
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
        }

        .app-container {
            padding: 20px;
            height: 100vh;
            overflow: hidden;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .menu-icon, .search-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .title-section {
            margin-bottom: 30px;
            padding-top: 20px;
        }

        .title-section h1 {
            font-size: 28px;
            margin-bottom: 5px;
            font-family: 'Gameplay', sans-serif;
            letter-spacing: 2px;
        }

        .title-section p {
            color: #999;
            font-size: 16px;
            margin-bottom: 1vh;
        }

        /* Categorías */
        .categories {
            position: sticky;
            top: 0;
            background-color: #1a1a1a;
            padding: 5px 20px;
            z-index: 1000;
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
            align-items: center;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
        }

        .category {
            padding: 8px 20px;
            background: #333;
            border-radius: 20px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .category.active {
            background: #FFD700;
            color: black;
            transform: scale(1.05);
        }

        /* Grid de productos */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 80px;
        }

        .product-card {
            background: #242424;
            border-radius: 15px;
            padding: 15px;
            position: relative;
            height: 280px;
            display: flex;
            flex-direction: column;
        }

        .product-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .product-title {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .product-description {
            color: #999;
            font-size: 12px;
            flex-grow: 1;
        }

        .product-price {
            color: #FFD700;
            font-weight: bold;
            position: absolute;
            bottom: 15px;
            left: 15px;
        }

        .add-button {
            position: absolute;
            bottom: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #333;
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .add-button:hover {
            background: #FFD700;
            color: black;
        }

        /* Navegación inferior */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #242424;
            padding: 15px;
            display: flex;
            justify-content: space-around;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            max-width: 480px;
            margin: 0 auto;
        }

        .nav-item {
            color: #666;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .nav-item.active {
            color: #FFD700;
        }

        /* Carrito flotante */
        .cart-button {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #FFD700;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4d4d;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        /* Estilos para la paginación */
        .pagination-dots {
            display: none;
        }

        .products-container {
            padding: 0 20px;
            padding-bottom: 80px; /* Espacio para la navegación inferior */
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            transition: transform 0.3s ease;
        }

        /* Estilos para la landing section */
        .landing-section {
            height: 100vh;
            background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('assets/hamburguesa1.png');
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .landing-content {
            padding: 20px;
        }

        .landing-content h1 {
            font-size: 48px;
            margin-bottom: 20px;
            color: white;
            font-family: 'Gameplay', sans-serif;
        }

        .landing-content p {
            font-size: 24px;
            color: #FFD700;
            margin-bottom: 30px;
        }

        .menu-button {
            padding: 15px 40px;
            font-size: 18px;
            background: #FFD700;
            border: none;
            border-radius: 25px;
            color: black;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .menu-button:hover {
            transform: scale(1.05);
        }

        /* Ajustar el contenedor principal */
        .app-container {
            height: 103vh;
            overflow: hidden;
        }

        /* Asegurar scroll suave */
        html {
            scroll-behavior: smooth;
        }

        /* Agregar un efecto de sombra sutil cuando está fijo */
        .categories::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(to bottom, rgba(26,26,26,0.8), transparent);
            pointer-events: none;
        }

        .menu-container {
            height: calc(100vh - 250px);
            overflow-y: auto;
            padding: 20px;
            scroll-behavior: smooth;
        }

        /* Agregar estos estilos para el icono del recibo y el contador */
        .receipt-icon {
            position: relative;
            transition: transform 0.3s ease;
        }

        .receipt-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #FFD700;
            color: black;
            font-size: 12px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        @keyframes successPulse {
            0% { color: #666; }
            50% { color: #4CAF50; }
            100% { color: #666; }
        }

        .success-animation {
            animation: successPulse 0.5s ease;
        }

        /* Modificar los estilos de categorías */
        .categories-container {
            position: relative;
            width: 100%;
            overflow: hidden;
            padding: 0 40px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .categories {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            position: relative;
        }

        .category {
            padding: 8px 20px;
            background: #333;
            border-radius: 20px;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s ease;
            display: none;
            text-align: center;
        }

        .category.active {
            display: flex;
            background: #FFD700;
            color: black;
            transform: scale(1.05);
            justify-content: center;
            align-items: center;
        }

        .nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #333;
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .prev-button {
            left: 5px;
        }

        .next-button {
            right: 5px;
        }

        .nav-button:hover {
            background: #FFD700;
            color: black;
        }

        @media (max-width: 480px) {
            .categories-container {
                padding: 0 30px;
            }
            
            .nav-button {
                width: 25px;
                height: 25px;
            }
        }

        /* Estilos para la sección de detalles del pedido */
        .order-details {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background-color: #1a1a1a;
            color: white;
            z-index: 2000;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .order-content {
            flex-grow: 1;
            overflow-y: auto;
        }

        .order-category {
            margin-bottom: 20px;
        }

        .order-category h3 {
            margin-bottom: 10px;
        }

        .order-category ul {
            list-style: none;
            padding: 0;
        }

        .order-category li {
            margin-bottom: 5px;
        }

        /* Estilos para los botones de acción */
        .order-actions {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            gap: 10px; /* Agregado para una leve separación entre botones */
            padding: 20px;
            background-color: #1a1a1a;
        }

        .action-button {
            padding: 10px 20px;
            background: #FFD700;
            border: none;
            border-radius: 20px; /* Cambiado a 20px para bordes más redondeados */
            color: black;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .action-button:hover {
            background: #e6c200;
        }
    </style>
</head>
<body>
    <!-- Sección Home/Landing -->
    <div class="landing-section">
        <div class="landing-content">
            <h1>Old Fashion</h1>
            <p>Burgers & Retro Gaming</p>
            <button class="menu-button" onclick="scrollToMenu()">VER MENU</button>
        </div>
    </div>

    <!-- Sección del Menú -->
    <div class="app-container" id="menu">
        <div class="title-section">
            <h1>¡Haz tu pedido!</h1>
            <p>Desplázate por las secciones usando las flechas y agrega los productos que desees a tu pedido usando el botón +. Tu pedido se irá guardando en el icono del recibo en la parte inferior. Cuando hayas terminado, podrás enviar el detalle completo por WhatsApp.</p>
        </div>

        <div class="categories-container">
            <button class="nav-button prev-button">
                <i class="fas fa-chevron-left"></i>
            </button>
            <div class="categories">
                <div class="category active">Hamburguesas</div>
                <div class="category">Acompañamientos</div>
                <div class="category">Bebidas</div>
            </div>
            <button class="nav-button next-button">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>

        <div class="menu-container">
            <div class="products-grid">
                <!-- Los productos se cargarán dinámicamente aquí -->
            </div>
        </div>

        <nav class="bottom-nav">
            <div class="nav-item active" id="homeButton">
                <i class="fas fa-home"></i>
            </div>
            <div class="nav-item">
                <img src="assets/logo.png" alt="Logo" style="width: 30px; height: 30px;">
            </div>
            <div class="nav-item receipt-icon">
                <i class="fas fa-receipt"></i>
                <span class="receipt-count">0</span>
            </div>
        </nav>
    </div>

    <!-- Nueva sección para el detalle de los pedidos -->
    <div class="order-details" id="orderDetails" style="display: none;">
        <div class="order-header">
            <h2>Detalle de tu Pedido</h2>
        </div>
        <div class="order-content">
            <div class="order-category" id="orderHamburguesas">
                <h3 style="color: orange;">Hamburguesas</h3>
                <ul></ul>
            </div>
            <br>
            <div class="order-category" id="orderAcompanamientos">
                <h3 style="color: orange;">Acompañamientos</h3>
                <ul></ul>
            </div>
            <br>
            <div class="order-category" id="orderBebidas">
                <h3 style="color: orange;">Bebidas</h3>
                <ul></ul>
            </div>
        </div>
        <div class="order-actions">
            <button class="action-button" onclick="clearOrder()">Borrar pedido</button>
            <button class="action-button" onclick="toggleOrderDetails()">Volver atrás</button>
            <button class="action-button" onclick="placeOrder()">Realizar pedido</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Definir los productos
            window.products = {
                hamburguesas: [
                    {
                        name: 'Hamburguesa Clásica',
                        description: 'Doble carne con queso',
                        price: 15.00,
                        image: 'assets/hamburguesa1.png'
                    },
                    {
                        name: 'Hamburguesa de Pollo',
                        description: 'Pollo a la parrilla con lechuga',
                        price: 13.00,
                        image: 'assets/hamburguesa1.png'
                    },
                    {
                        name: 'Hamburguesa Tradicional',
                        description: 'Carne con lechuga y tomate',
                        price: 12.00,
                        image: 'assets/hamburguesa1.png'
                    },
                    {
                        name: 'Hamburguesa Vegetariana',
                        description: 'Medallón vegetal con aguacate',
                        price: 14.00,
                        image: 'assets/hamburguesa1.png'
                    },
                    {
                        name: 'Hamburguesa BBQ',
                        description: 'Salsa BBQ ahumada y tocino',
                        price: 16.00,
                        image: 'assets/hamburguesa1.png'
                    },
                    {
                        name: 'Hamburguesa con Champiñones',
                        description: 'Champiñones salteados y queso',
                        price: 15.50,
                        image: 'assets/hamburguesa1.png'
                    }
                ],
                acompañamientos: [
                    {
                        name: 'Papas Fritas',
                        description: 'Papas doradas y crujientes',
                        price: 5.00,
                        image: 'assets/acompañamiento.avif'
                    },
                    {
                        name: 'Aros de Cebolla',
                        description: 'Cebollas rebozadas crujientes',
                        price: 6.00,
                        image: 'assets/acompañamiento.avif'
                    },
                    {
                        name: 'Nuggets de Pollo',
                        description: '6 piezas con salsa a elección',
                        price: 7.00,
                        image: 'assets/acompañamiento.avif'
                    },
                    {
                        name: 'Papas con Cheddar',
                        description: 'Papas fritas con queso cheddar y bacon',
                        price: 8.00,
                        image: 'assets/acompañamiento.avif'
                    }
                ],
                bebidas: [
                    {
                        name: 'Coca-Cola',
                        description: 'Bebida gasificada 500ml',
                        price: 3.00,
                        image: 'assets/gaseosas.webp'
                    },
                    {
                        name: 'Sprite',
                        description: 'Bebida gasificada 500ml',
                        price: 3.00,
                        image: 'assets/gaseosas.webp'
                    },
                    {
                        name: 'Fanta',
                        description: 'Bebida gasificada 500ml',
                        price: 3.00,
                        image: 'assets/gaseosas.webp'
                    },
                    {
                        name: 'Agua Mineral',
                        description: 'Agua sin gas 500ml',
                        price: 2.50,
                        image: 'assets/gaseosas.webp'
                    }
                ]
            };

            let orderCount = 0;
            const receiptCountElement = document.querySelector('.receipt-count');
            const productsGrid = document.querySelector('.products-grid');

            // Función para mostrar productos
            function displayProducts(category) {
                const productsGrid = document.querySelector('.products-grid');
                const categoryProducts = window.products[category];
                
                if (!categoryProducts) {
                    console.error('Categoría no encontrada:', category);
                    return;
                }
                
                productsGrid.innerHTML = '';
                
                categoryProducts.forEach(product => {
                    const productCard = `
                        <div class="product-card">
                            <img src="${product.image}" alt="${product.name}" class="product-image">
                            <h3 class="product-title">${product.name}</h3>
                            <p class="product-description">${product.description}</p>
                            <span class="product-price">$${product.price.toFixed(2)}</span>
                            <button class="add-button">+</button>
                        </div>
                    `;
                    productsGrid.innerHTML += productCard;
                });

                addOrderButtonListeners();
            }

            // Manejo de categorías
            const categoriesContainer = document.querySelector('.categories');
            const prevButton = document.querySelector('.prev-button');
            const nextButton = document.querySelector('.next-button');
            const categories = document.querySelectorAll('.category');
            let currentIndex = 0;

            // Función para centrar una categoría
            function centerCategory(index) {
                const category = categories[index];
                const containerWidth = categoriesContainer.offsetWidth;
                const categoryWidth = category.offsetWidth;
                const categoryLeft = category.offsetLeft;
                const scrollPosition = categoryLeft - (containerWidth / 2) + (categoryWidth / 2);
                
                categoriesContainer.scrollTo({
                    left: scrollPosition,
                    behavior: 'smooth'
                });
            }

            // Función para cambiar la categoría activa
            function changeCategory(direction) {
                categories[currentIndex].classList.remove('active');
                currentIndex = (currentIndex + direction + categories.length) % categories.length;
                categories[currentIndex].classList.add('active');
                
                // Obtener el nombre de la categoría y normalizarlo
                let categoryName = categories[currentIndex].textContent.toLowerCase()
                    .normalize('NFD')
                    .replace(/[\u0300-\u036f]/g, '');
                
                // Asegurarse de que el nombre coincida con las keys de products
                if (categoryName === 'acompañamientos' || categoryName === 'acompanamientos') {
                    categoryName = 'acompañamientos';
                }
                
                displayProducts(categoryName);
            }

            // Event listeners para los botones
            prevButton.addEventListener('click', () => changeCategory(-1));
            nextButton.addEventListener('click', () => changeCategory(1));

            // Event listeners para las categorías
            categories.forEach((category, index) => {
                category.addEventListener('click', () => {
                    categories[currentIndex].classList.remove('active');
                    currentIndex = index;
                    category.classList.add('active');
                    centerCategory(index);
                    const categoryName = category.textContent.toLowerCase();
                    displayProducts(categoryName);
                });
            });

            // Manejar scroll táctil
            let touchStartX = 0;
            let touchEndX = 0;

            categoriesContainer.addEventListener('touchstart', e => {
                touchStartX = e.changedTouches[0].screenX;
            });

            categoriesContainer.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                const difference = touchStartX - touchEndX;
                
                if (Math.abs(difference) > 50) { // umbral mínimo para considerar como swipe
                    if (difference > 0 && currentIndex < categories.length - 1) {
                        changeCategory(1);
                    } else if (difference < 0 && currentIndex > 0) {
                        changeCategory(-1);
                    } else {
                        centerCategory(currentIndex); // volver a centrar si no se puede cambiar
                    }
                } else {
                    centerCategory(currentIndex); // volver a centrar si el swipe fue muy corto
                }
            });

            // Manejo de botones de orden
            function addOrderButtonListeners() {
                const addButtons = document.querySelectorAll('.add-button');
                addButtons.forEach((button, index) => {
                    button.addEventListener('click', () => {
                        const category = categories[currentIndex].textContent.toLowerCase();
                        const product = window.products[category][index];
                        order[category].push(product);

                        orderCount++;
                        receiptCountElement.textContent = orderCount;

                        // Animación del botón
                        button.style.transform = 'scale(0.9)';
                        setTimeout(() => {
                            button.style.transform = 'scale(1)';
                        }, 100);

                        // Animación del icono del recibo
                        receiptIcon.style.transform = 'scale(1.2)';
                        receiptIconI.classList.add('success-animation');
                        
                        setTimeout(() => {
                            receiptIcon.style.transform = 'scale(1)';
                            receiptIconI.classList.remove('success-animation');
                        }, 500);
                    });
                });
            }

            // Función para scroll al menú
            window.scrollToMenu = function() {
                document.getElementById('menu').scrollIntoView({ behavior: 'smooth' });
            }

            // Mostrar productos iniciales
            displayProducts('hamburguesas');

            // Agregar el event listener para el botón home
            const homeButton = document.getElementById('homeButton');
            homeButton.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            const receiptIcon = document.querySelector('.receipt-icon');
            const orderDetails = document.getElementById('orderDetails');
            const orderHamburguesas = document.getElementById('orderHamburguesas').querySelector('ul');
            const orderAcompanamientos = document.getElementById('orderAcompanamientos').querySelector('ul');
            const orderBebidas = document.getElementById('orderBebidas').querySelector('ul');

            let order = {
                hamburguesas: [],
                acompañamientos: [],
                bebidas: []
            };

            // Función para alternar la visibilidad del detalle de pedidos
            window.toggleOrderDetails = function() {
                const isVisible = orderDetails.style.display === 'block';
                orderDetails.style.display = isVisible ? 'none' : 'block';
                document.querySelector('.app-container').style.display = isVisible ? 'block' : 'none';
            }

            // Event listener para el icono del recibo
            receiptIcon.addEventListener('click', () => {
                updateOrderDetails();
                toggleOrderDetails();
            });

            // Función para actualizar el detalle de los pedidos
            function updateOrderDetails() {
                orderHamburguesas.innerHTML = '';
                orderAcompanamientos.innerHTML = '';
                orderBebidas.innerHTML = '';

                order.hamburguesas.forEach(item => {
                    orderHamburguesas.innerHTML += `<li>${item.name}</li>`;
                });

                order.acompañamientos.forEach(item => {
                    orderAcompanamientos.innerHTML += `<li>${item.name}</li>`;
                });

                order.bebidas.forEach(item => {
                    orderBebidas.innerHTML += `<li>${item.name}</li>`;
                });
            }

            // Función para borrar el pedido
            window.clearOrder = function() {
                order = {
                    hamburguesas: [],
                    acompañamientos: [],
                    bebidas: []
                };
                orderCount = 0;
                receiptCountElement.textContent = orderCount;
                updateOrderDetails();
            }

            // Función para realizar el pedido
            window.placeOrder = function() {
                const phoneNumber = "1234567890"; // Reemplaza con el número de WhatsApp del local
                let message = "Hola, me gustaría realizar el siguiente pedido:\n\n";

                if (order.hamburguesas.length > 0) {
                    message += "Hamburguesas:\n";
                    order.hamburguesas.forEach(item => {
                        message += `- ${item.name}\n`;
                    });
                }

                if (order.acompañamientos.length > 0) {
                    message += "\nAcompañamientos:\n";
                    order.acompañamientos.forEach(item => {
                        message += `- ${item.name}\n`;
                    });
                }

                if (order.bebidas.length > 0) {
                    message += "\nBebidas:\n";
                    order.bebidas.forEach(item => {
                        message += `- ${item.name}\n`;
                    });
                }

                const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');

                clearOrder();
                toggleOrderDetails();
            }
        });
    </script>
</body>
</html>
